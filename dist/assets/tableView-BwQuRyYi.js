import{_ as m,a as p,c as d,b as e,d as w,F as u,r as g,t as l,o as a,n as h,e as f}from"./index-DhZuipct.js";const _={emits:["editOrDelete"],props:{forceGet:Boolean},data(){return{connection:null,showRecord:!1,clients:[],record:{},token:null}},mounted(){this.token=this.getCookie("token"),this.token||this.$router.push({name:"login"}),this.lunchWebSocket(),this.getClients()},methods:{getClients(){p.get("http://bin.greatergraceag.com/api/clients",{headers:{Authorization:`Bearer ${this.token}`}}).then(r=>{this.clients=r.data}).catch(r=>{console.error(r)})},getRecord(r){this.showRecord=!0,p.get("http://bin.greatergraceag.com/api/records/"+r,{headers:{Authorization:`Bearer ${this.token}`}}).then(t=>{this.record=t.data}).catch(t=>{console.error(t)})},verifyRecord(r,t,n){n||p.put("http://bin.greatergraceag.com/api/record/"+r,{headers:{Authorization:`Bearer ${this.token}`}}).then(i=>{this.getRecord(t)}).catch(i=>{console.error(i)})},getThreshold(r){return r<=20?"bg-emerald-300":r>20&&r<80?"bg-yellow-300":"bg-red-300"},editOrDelete(r){this.emitter.emit("editOrDelete",JSON.stringify(r))},lunchWebSocket(){const r=new WebSocket("ws://localhost:3000");console.log("Starting connection to WebSocket Server"),r.onopen=t=>{console.log("Successfully connected to the echo WebSocket server...")},r.onmessage=t=>{this.getClients()},r.onclose=t=>{console.log("WebSocket connection closed:",t)}},getCookie(r){let t=r+"=",n=document.cookie.split(";");for(let i=0;i<n.length;i++){let s=n[i];for(;s.charAt(0)==" ";)s=s.substring(1);if(s.indexOf(t)==0)return s.substring(t.length,s.length)}return""}},watch:{forceGet(r,t){r!=t&&this.getClients()}}},y={class:"py-1 bg-blueGray-50"},k={class:"w-full xl:w-8/12 mb-12 xl:mb-0 px-4 mx-auto mt-24"},G={class:"relative flex flex-col min-w-0 break-words bg-white w-full mb-6 shadow-lg rounded"},v={class:"rounded-t mb-0 px-4 py-3 border-0"},C={class:"flex flex-wrap items-center"},S={class:"relative w-full px-4 max-w-full flex-grow flex-1"},R=e("h3",{class:"font-semibold inline text-base text-blueGray-700"},"Summary",-1),V={key:0,class:"block w-full overflow-x-auto"},B={class:"items-center bg-transparent w-full border-collapse"},O=e("thead",null,[e("tr",{class:"hover:bg-gray-200"},[e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},"Owner"),e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},"location"),e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},"Quantity"),e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},"Remark"),e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-left"},"Actions")])],-1),W=["onClick"],A={class:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4 text-left text-blueGray-700"},D={class:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},N={class:"border-t-0 px-6 align-center border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},z={class:"border-t-0 px-6 align-middle border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},T={class:"border-t-0 px-6 align-center border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},F=["onClick"],L=e("i",{class:"fa-solid text-lg fa-pen-nib"},null,-1),E=[L],I={key:1,class:"block w-full overflow-x-auto"},J={class:"items-center bg-transparent w-full border-collapse"},Q={class:"hover:bg-gray-200"},j={class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle text-center border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold"},q=e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"},"Date/Time",-1),H=e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"},"Level",-1),K=e("th",{class:"px-6 bg-blueGray-50 text-blueGray-500 align-middle border border-solid border-blueGray-100 py-3 text-xs uppercase border-l-0 border-r-0 whitespace-nowrap font-semibold text-center"},"Is Verified",-1),M=e("td",{class:"border-t-0 px-6 text-center align-middle border-l-0 border-r-0"},[e("i",{class:"bi bi-check2-all text-green-500 text-xl"})],-1),P={class:"border-t-0 px-6 align-center text-center border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},U={class:"border-t-0 px-6 align-middle text-center border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},X={class:"border-t-0 px-6 align-middle text-center border-l-0 border-r-0 text-xs whitespace-nowrap p-4"},Y=["onClick"];function Z(r,t,n,i,s,c){return a(),d("div",null,[e("section",y,[e("div",k,[e("div",G,[e("div",v,[e("div",C,[e("div",S,[s.showRecord?(a(),d("i",{key:0,class:"fas mr-4 fa-arrow-left ring-black ring rounded-full p-1 border-black inline text-black",onClick:t[0]||(t[0]=o=>s.showRecord=!1)})):w("",!0),R])])]),s.showRecord?(a(),d("div",I,[e("table",J,[e("thead",null,[e("tr",Q,[e("th",j,l(s.record.name)+" @ "+l(s.record.location),1),q,H,K])]),e("tbody",null,[(a(!0),d(u,null,g(s.record.records,(o,b)=>(a(),d("tr",{class:"hover:bg-gray-200",key:b},[M,e("td",P,l(o.updatedAt),1),e("td",U,l(100-o.level),1),e("td",X,[e("button",{onClick:x=>c.verifyRecord(o.id,s.record.id,o.isVerified),class:h(["px-5 py-1 text-center uppercase rounded-md w-32",o.isVerified?" bg-emerald-300":" bg-red-300"])},l(o.isVerified?"Verified":"Not Verified"),11,Y)])]))),128))])])])):(a(),d("div",V,[e("table",B,[O,e("tbody",null,[(a(!0),d(u,null,g(s.clients,(o,b)=>(a(),d("tr",{class:"hover:bg-gray-200",onClick:x=>c.getRecord(o.id),key:b},[e("th",A,l(o.name),1),e("td",D,l(o.location),1),e("td",N,[e("i",{class:h(["fas mr-4",o.level>=80?"fa-arrow-down text-emerald-500":"fa-arrow-up text-red-500"])},null,2),f(" "+l(100-o.level),1)]),e("td",z,[e("p",{class:h(["px-5 py-1 text-center uppercase rounded-md w-32",c.getThreshold(100-o.level)])},l(o.remark),3)]),e("td",T,[e("button",{class:"px-5 py-1 text-center border hover:bg-blue-950 hover:text-white border-blue-950 uppercase rounded-md w-32",onClick:x=>c.editOrDelete(o)},E,8,F)])],8,W))),128))])])]))])])])])}const ee=m(_,[["render",Z]]);export{ee as default};
